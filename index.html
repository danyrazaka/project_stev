<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Projet Stevia - Consultation</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      display: flex;
      font-family: sans-serif;
      margin: 0;
      height: 100vh;
      overflow: hidden;
    }

    nav {
      width: 280px;
      min-width: 280px;
      background: #f4f4f4;
      padding: 1em;
      overflow-y: auto;
      flex-shrink: 0;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }

    main {
      flex-grow: 1;
      padding: 2em;
      overflow-y: auto;
      background-color: #fff;
    }

    a {
      display: block;
      margin: 0.5em 0;
      color: #333;
      text-decoration: none;
      font-size: 1em;
    }

    a:hover {
      text-decoration: underline;
    }

    .markdown-content h1, .markdown-content h2, .markdown-content h3 {
      margin-top: 1.5em;
    }

    .markdown-content p {
      margin: 0.5em 0;
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }

      nav {
        width: 100%;
        min-width: unset;
        height: auto;
        display: flex;
        flex-wrap: wrap;
        gap: 0.5em;
        font-size: 1.1em;
      }

      nav a {
        flex: 1 1 calc(50% - 1em);
        font-size: 1.1em;
        padding: 0.5em 0;
      }

      main {
        padding: 1em;
        height: calc(100vh - 200px);
        overflow-y: auto;
      }
    }
  </style>
</head>
<body>
  <nav>
    <h2>Sommaire</h2>
    <a href="#" onclick="loadMarkdown('Sommaire.md')">üìÑ Sommaire</a>
    <a href="#" onclick="loadMarkdown('1.md')">1. Projet d'usine de stevia √† Madagascar</a>
    <a href="#" onclick="loadMarkdown('2.md')">2. S√©lection et propagation</a>
    <a href="#" onclick="loadMarkdown('3.md')">3. Pr√©paration du terrain</a>
    <a href="#" onclick="loadMarkdown('4.md')">4. Techniques culturales</a>
    <a href="#" onclick="loadMarkdown('5.md')">5. R√©colte et post-r√©colte</a>
    <a href="#" onclick="loadMarkdown('6.md')">6. Extraction et transformation</a>
    <a href="#" onclick="loadMarkdown('7.md')">7. Production en poudre</a>
    <a href="#" onclick="loadMarkdown('8.md')">8. Contr√¥le qualit√©</a>
    <a href="#" onclick="loadMarkdown('9.md')">9. Aspects √©conomiques</a>
    <a href="#" onclick="loadMarkdown('10.md')">10. Automatisation</a>
    <a href="#" onclick="loadMarkdown('11.md')">11. Durabilit√©</a>
    <a href="#" onclick="loadMarkdown('12.md')">12. Conclusion</a>
  </nav>

  <main>
    <div id="content" class="markdown-content">Chargement du sommaire...</div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    function loadMarkdown(file) {
      fetch('./markdown/' + file)
        .then(response => {
          if (!response.ok) throw new Error("HTTP " + response.status);
          return response.text();
        })
        .then(text => {
          const html = marked.parse(text);
          const container = document.getElementById('content');
          container.innerHTML = html;

          // Ajouter gestion des liens internes du sommaire (ex: [‚Üí chapitre 2](2.md))
          container.querySelectorAll('a[href$=".md"]').forEach(link => {
            link.addEventListener('click', event => {
              event.preventDefault();
              const href = link.getAttribute('href');
              if (href) {
                loadMarkdown(href);
              }
            });
          });
        })
        .catch(error => {
          document.getElementById('content').innerHTML = `<p>Erreur de chargement : ${error.message}</p>`;
        });
    }

    // Charger le sommaire par d√©faut au chargement de la page
    window.onload = function () {
      loadMarkdown('Sommaire.md');
    };
  </script>
</body>
</html>